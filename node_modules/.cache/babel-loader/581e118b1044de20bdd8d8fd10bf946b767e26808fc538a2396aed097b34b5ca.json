{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\nexport default {\n  name: 'QuizComponent',\n  setup() {\n    const questions = [{\n      id: 1,\n      text: \"Ai experiență în dezvoltare web?\",\n      feedbackYes: \"Excelent! Experiența ta în dezvoltare web este un atu important.\",\n      feedbackNo: \"Nu-ți face griji! Toți începem de undeva. Îți recomandăm să începi cu bazele.\"\n    }, {\n      id: 2,\n      text: \"Ai lucrat înainte cu Vue.js?\",\n      feedbackYes: \"Perfect! Cunoștințele tale de Vue.js vor fi foarte utile.\",\n      feedbackNo: \"Vue.js este un framework excelent pentru început. Începe cu documentația oficială.\"\n    }, {\n      id: 3,\n      text: \"Ai experiență cu sisteme de versionare (Git)?\",\n      feedbackYes: \"Foarte bine! Git este esențial în dezvoltarea modernă.\",\n      feedbackNo: \"Git este un instrument fundamental. Începe cu tutorialele de bază.\"\n    }];\n    const currentQuestionIndex = ref(0);\n    const answers = ref({});\n    const userEmail = ref('');\n    const emailError = ref(false);\n    const currentQuestion = computed(() => questions[currentQuestionIndex.value]);\n    const isCompleted = computed(() => currentQuestionIndex.value >= questions.length);\n    const isValidEmail = computed(() => {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(userEmail.value);\n    });\n    const generatePDF = () => {\n      const doc = new jsPDF({\n        unit: 'mm',\n        format: 'a4',\n        compress: true\n      });\n\n      // Setări inițiale font\n      doc.setFont(\"helvetica\");\n      doc.setFontSize(16);\n\n      // Header\n      doc.setFontSize(22);\n      doc.text('Raport de Evaluare', 105, 25, {\n        align: 'center'\n      });\n\n      // Data\n      doc.setFontSize(12);\n      const date = new Date().toLocaleDateString('ro-RO', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      }).split('.').join('.');\n      doc.text(`Generat la: ${date}`, 105, 35, {\n        align: 'center'\n      });\n      let yPos = 50;\n\n      // Întrebări și răspunsuri\n      questions.forEach((question, index) => {\n        const answer = answers.value[question.id];\n\n        // Verifică spațiul disponibil\n        if (yPos > 250) {\n          doc.addPage();\n          yPos = 30;\n        }\n\n        // Întrebarea\n        doc.setFontSize(12);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(`${index + 1}. ${question.text}`, 20, yPos);\n        yPos += 10;\n\n        // Răspuns\n        doc.setFontSize(12);\n        doc.text(`Răspuns: ${answer ? 'Da' : 'Nu'}`, 20, yPos, {\n          charSpace: 0\n        });\n        yPos += 8;\n\n        // Feedback\n        const feedback = answer ? question.feedbackYes : question.feedbackNo;\n        const splitFeedback = doc.splitTextToSize(feedback, 170);\n        doc.setFontSize(12);\n        splitFeedback.forEach(line => {\n          if (yPos > 270) {\n            doc.addPage();\n            yPos = 30;\n          }\n          doc.text(line, 20, yPos, {\n            charSpace: 0\n          });\n          yPos += 7;\n        });\n        yPos += 10;\n      });\n\n      // Footer\n      doc.setFontSize(10);\n      doc.text('Document generat automat', 105, 280, {\n        align: 'center',\n        charSpace: 0\n      });\n      return doc.output('blob');\n    };\n    const answerQuestion = answer => {\n      answers.value[currentQuestion.value.id] = answer;\n      currentQuestionIndex.value++;\n    };\n    const submitResults = async () => {\n      if (!isValidEmail.value) {\n        emailError.value = true;\n        return;\n      }\n      try {\n        const pdfBlob = generatePDF();\n        const formData = new FormData();\n        formData.append('pdf', pdfBlob, 'rezultate.pdf');\n        formData.append('email', userEmail.value);\n        await axios.post('http://localhost:3000/send-results', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        alert('Rezultatele au fost trimise pe email!');\n      } catch (error) {\n        console.error('Error:', error);\n        alert('A apărut o eroare. Te rugăm să încerci din nou.');\n      }\n    };\n    return {\n      questions,\n      currentQuestion,\n      currentQuestionIndex,\n      isCompleted,\n      userEmail,\n      emailError,\n      isValidEmail,\n      answerQuestion,\n      submitResults\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","jsPDF","axios","name","setup","questions","id","text","feedbackYes","feedbackNo","currentQuestionIndex","answers","userEmail","emailError","currentQuestion","value","isCompleted","length","isValidEmail","emailRegex","test","generatePDF","doc","unit","format","compress","setFont","setFontSize","align","date","Date","toLocaleDateString","year","month","day","split","join","yPos","forEach","question","index","answer","addPage","charSpace","feedback","splitFeedback","splitTextToSize","line","output","answerQuestion","submitResults","pdfBlob","formData","FormData","append","post","headers","alert","error","console"],"sources":["D:\\Projects\\Barmayoun\\vue-questions\\quizz-app-v2\\src\\components\\QuizComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-2xl mx-auto\">\r\n    <div v-if=\"!isCompleted\" class=\"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\">\r\n      <div class=\"space-y-6\">\r\n        <div class=\"flex items-center justify-between mb-6\">\r\n          <span class=\"text-sm font-medium text-gray-500\">\r\n            Progres\r\n          </span>\r\n          <span class=\"text-sm font-medium text-gray-500\">\r\n            {{ currentQuestionIndex + 1 }}/{{ questions.length }}\r\n          </span>\r\n        </div>\r\n\r\n        <div class=\"w-full bg-gray-200 rounded-full h-2 mb-8\">\r\n          <div class=\"bg-primary rounded-full h-2 transition-all duration-300\"\r\n            :style=\"{ width: `${(currentQuestionIndex / questions.length) * 100}%` }\"></div>\r\n        </div>\r\n\r\n        <h2 class=\"text-2xl font-medium text-gray-800 mb-8\">\r\n          {{ currentQuestion.text }}\r\n        </h2>\r\n\r\n        <div class=\"flex gap-4 justify-center\">\r\n          <button @click=\"answerQuestion(true)\"\r\n            class=\"flex-1 py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200\">\r\n            Da\r\n          </button>\r\n          <button @click=\"answerQuestion(false)\"\r\n            class=\"flex-1 py-3 px-6 bg-white hover:bg-gray-50 text-gray-800 border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200\">\r\n            Nu\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\">\r\n      <div class=\"text-center space-y-6\">\r\n        <div class=\"mb-8\">\r\n          <div class=\"inline-flex items-center justify-center w-16 h-16 bg-primary/20 rounded-full mb-4\">\r\n            <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n            </svg>\r\n          </div>\r\n          <h2 class=\"text-2xl font-semibold text-gray-800 mb-2\">\r\n            Felicitări! Ai finalizat evaluarea\r\n          </h2>\r\n          <p class=\"text-gray-600\">\r\n            Introdu adresa ta de email pentru a primi raportul personalizat.\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"max-w-md mx-auto\">\r\n          <input type=\"email\" v-model=\"userEmail\" placeholder=\"email@example.com\"\r\n            class=\"w-full px-4 py-3 rounded-xl border border-gray-200 mb-4 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none\"\r\n            :class=\"{ 'border-red-300': emailError }\">\r\n          <button @click=\"submitResults\"\r\n            class=\"w-full py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50\"\r\n            :disabled=\"!isValidEmail\">\r\n            Trimite Rezultatele\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { jsPDF } from 'jspdf'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'QuizComponent',\r\n  setup() {\r\n    const questions = [\r\n      {\r\n        id: 1,\r\n        text: \"Ai experiență în dezvoltare web?\",\r\n        feedbackYes: \"Excelent! Experiența ta în dezvoltare web este un atu important.\",\r\n        feedbackNo: \"Nu-ți face griji! Toți începem de undeva. Îți recomandăm să începi cu bazele.\"\r\n      },\r\n      {\r\n        id: 2,\r\n        text: \"Ai lucrat înainte cu Vue.js?\",\r\n        feedbackYes: \"Perfect! Cunoștințele tale de Vue.js vor fi foarte utile.\",\r\n        feedbackNo: \"Vue.js este un framework excelent pentru început. Începe cu documentația oficială.\"\r\n      },\r\n      {\r\n        id: 3,\r\n        text: \"Ai experiență cu sisteme de versionare (Git)?\",\r\n        feedbackYes: \"Foarte bine! Git este esențial în dezvoltarea modernă.\",\r\n        feedbackNo: \"Git este un instrument fundamental. Începe cu tutorialele de bază.\"\r\n      }\r\n    ]\r\n\r\n    const currentQuestionIndex = ref(0)\r\n    const answers = ref({})\r\n    const userEmail = ref('')\r\n    const emailError = ref(false)\r\n\r\n    const currentQuestion = computed(() =>\r\n      questions[currentQuestionIndex.value]\r\n    )\r\n\r\n    const isCompleted = computed(() =>\r\n      currentQuestionIndex.value >= questions.length\r\n    )\r\n\r\n    const isValidEmail = computed(() => {\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n      return emailRegex.test(userEmail.value)\r\n    })\r\n\r\n    const generatePDF = () => {\r\n      const doc = new jsPDF({\r\n        unit: 'mm',\r\n        format: 'a4',\r\n        compress: true\r\n      })\r\n\r\n      // Setări inițiale font\r\n      doc.setFont(\"helvetica\")\r\n      doc.setFontSize(16)\r\n\r\n      // Header\r\n      doc.setFontSize(22)\r\n      doc.text('Raport de Evaluare', 105, 25, { align: 'center' })\r\n\r\n      // Data\r\n      doc.setFontSize(12)\r\n      const date = new Date().toLocaleDateString('ro-RO', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit'\r\n      }).split('.').join('.')\r\n      doc.text(`Generat la: ${date}`, 105, 35, { align: 'center' })\r\n\r\n      let yPos = 50\r\n\r\n      // Întrebări și răspunsuri\r\n      questions.forEach((question, index) => {\r\n        const answer = answers.value[question.id]\r\n\r\n        // Verifică spațiul disponibil\r\n        if (yPos > 250) {\r\n          doc.addPage()\r\n          yPos = 30\r\n        }\r\n\r\n        // Întrebarea\r\n        doc.setFontSize(12)\r\n        doc.setFont(\"helvetica\", \"normal\")\r\n        doc.text(`${index + 1}. ${question.text}`, 20, yPos)\r\n        yPos += 10\r\n\r\n        // Răspuns\r\n        doc.setFontSize(12)\r\n        doc.text(`Răspuns: ${answer ? 'Da' : 'Nu'}`, 20, yPos, {\r\n          charSpace: 0\r\n        })\r\n        yPos += 8\r\n\r\n        // Feedback\r\n        const feedback = answer ? question.feedbackYes : question.feedbackNo\r\n        const splitFeedback = doc.splitTextToSize(feedback, 170)\r\n\r\n        doc.setFontSize(12)\r\n        splitFeedback.forEach(line => {\r\n          if (yPos > 270) {\r\n            doc.addPage()\r\n            yPos = 30\r\n          }\r\n          doc.text(line, 20, yPos, {\r\n            charSpace: 0\r\n          })\r\n          yPos += 7\r\n        })\r\n\r\n        yPos += 10\r\n      })\r\n\r\n      // Footer\r\n      doc.setFontSize(10)\r\n      doc.text('Document generat automat', 105, 280, {\r\n        align: 'center',\r\n        charSpace: 0\r\n      })\r\n\r\n      return doc.output('blob')\r\n    }\r\n\r\n    const answerQuestion = (answer) => {\r\n      answers.value[currentQuestion.value.id] = answer\r\n      currentQuestionIndex.value++\r\n    }\r\n\r\n    const submitResults = async () => {\r\n      if (!isValidEmail.value) {\r\n        emailError.value = true\r\n        return\r\n      }\r\n\r\n      try {\r\n        const pdfBlob = generatePDF()\r\n        const formData = new FormData()\r\n        formData.append('pdf', pdfBlob, 'rezultate.pdf')\r\n        formData.append('email', userEmail.value)\r\n\r\n        await axios.post('http://localhost:3000/send-results', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        })\r\n\r\n        alert('Rezultatele au fost trimise pe email!')\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        alert('A apărut o eroare. Te rugăm să încerci din nou.')\r\n      }\r\n    }\r\n\r\n    return {\r\n      questions,\r\n      currentQuestion,\r\n      currentQuestionIndex,\r\n      isCompleted,\r\n      userEmail,\r\n      emailError,\r\n      isValidEmail,\r\n      answerQuestion,\r\n      submitResults\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AAmEA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,SAASC,KAAI,QAAS,OAAM;AAC5B,OAAOC,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAI,CAChB;MACEC,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,kCAAkC;MACxCC,WAAW,EAAE,kEAAkE;MAC/EC,UAAU,EAAE;IACd,CAAC,EACD;MACEH,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,8BAA8B;MACpCC,WAAW,EAAE,2DAA2D;MACxEC,UAAU,EAAE;IACd,CAAC,EACD;MACEH,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,+CAA+C;MACrDC,WAAW,EAAE,wDAAwD;MACrEC,UAAU,EAAE;IACd,EACF;IAEA,MAAMC,oBAAmB,GAAIX,GAAG,CAAC,CAAC;IAClC,MAAMY,OAAM,GAAIZ,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMa,SAAQ,GAAIb,GAAG,CAAC,EAAE;IACxB,MAAMc,UAAS,GAAId,GAAG,CAAC,KAAK;IAE5B,MAAMe,eAAc,GAAId,QAAQ,CAAC,MAC/BK,SAAS,CAACK,oBAAoB,CAACK,KAAK,CACtC;IAEA,MAAMC,WAAU,GAAIhB,QAAQ,CAAC,MAC3BU,oBAAoB,CAACK,KAAI,IAAKV,SAAS,CAACY,MAC1C;IAEA,MAAMC,YAAW,GAAIlB,QAAQ,CAAC,MAAM;MAClC,MAAMmB,UAAS,GAAI,4BAA2B;MAC9C,OAAOA,UAAU,CAACC,IAAI,CAACR,SAAS,CAACG,KAAK;IACxC,CAAC;IAED,MAAMM,WAAU,GAAIA,CAAA,KAAM;MACxB,MAAMC,GAAE,GAAI,IAAIrB,KAAK,CAAC;QACpBsB,IAAI,EAAE,IAAI;QACVC,MAAM,EAAE,IAAI;QACZC,QAAQ,EAAE;MACZ,CAAC;;MAED;MACAH,GAAG,CAACI,OAAO,CAAC,WAAW;MACvBJ,GAAG,CAACK,WAAW,CAAC,EAAE;;MAElB;MACAL,GAAG,CAACK,WAAW,CAAC,EAAE;MAClBL,GAAG,CAACf,IAAI,CAAC,oBAAoB,EAAE,GAAG,EAAE,EAAE,EAAE;QAAEqB,KAAK,EAAE;MAAS,CAAC;;MAE3D;MACAN,GAAG,CAACK,WAAW,CAAC,EAAE;MAClB,MAAME,IAAG,GAAI,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO,EAAE;QAClDC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,SAAS;QAChBC,GAAG,EAAE;MACP,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG;MACtBd,GAAG,CAACf,IAAI,CAAC,eAAesB,IAAI,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;QAAED,KAAK,EAAE;MAAS,CAAC;MAE5D,IAAIS,IAAG,GAAI,EAAC;;MAEZ;MACAhC,SAAS,CAACiC,OAAO,CAAC,CAACC,QAAQ,EAAEC,KAAK,KAAK;QACrC,MAAMC,MAAK,GAAI9B,OAAO,CAACI,KAAK,CAACwB,QAAQ,CAACjC,EAAE;;QAExC;QACA,IAAI+B,IAAG,GAAI,GAAG,EAAE;UACdf,GAAG,CAACoB,OAAO,CAAC;UACZL,IAAG,GAAI,EAAC;QACV;;QAEA;QACAf,GAAG,CAACK,WAAW,CAAC,EAAE;QAClBL,GAAG,CAACI,OAAO,CAAC,WAAW,EAAE,QAAQ;QACjCJ,GAAG,CAACf,IAAI,CAAC,GAAGiC,KAAI,GAAI,CAAC,KAAKD,QAAQ,CAAChC,IAAI,EAAE,EAAE,EAAE,EAAE8B,IAAI;QACnDA,IAAG,IAAK,EAAC;;QAET;QACAf,GAAG,CAACK,WAAW,CAAC,EAAE;QAClBL,GAAG,CAACf,IAAI,CAAC,YAAYkC,MAAK,GAAI,IAAG,GAAI,IAAI,EAAE,EAAE,EAAE,EAAEJ,IAAI,EAAE;UACrDM,SAAS,EAAE;QACb,CAAC;QACDN,IAAG,IAAK;;QAER;QACA,MAAMO,QAAO,GAAIH,MAAK,GAAIF,QAAQ,CAAC/B,WAAU,GAAI+B,QAAQ,CAAC9B,UAAS;QACnE,MAAMoC,aAAY,GAAIvB,GAAG,CAACwB,eAAe,CAACF,QAAQ,EAAE,GAAG;QAEvDtB,GAAG,CAACK,WAAW,CAAC,EAAE;QAClBkB,aAAa,CAACP,OAAO,CAACS,IAAG,IAAK;UAC5B,IAAIV,IAAG,GAAI,GAAG,EAAE;YACdf,GAAG,CAACoB,OAAO,CAAC;YACZL,IAAG,GAAI,EAAC;UACV;UACAf,GAAG,CAACf,IAAI,CAACwC,IAAI,EAAE,EAAE,EAAEV,IAAI,EAAE;YACvBM,SAAS,EAAE;UACb,CAAC;UACDN,IAAG,IAAK;QACV,CAAC;QAEDA,IAAG,IAAK,EAAC;MACX,CAAC;;MAED;MACAf,GAAG,CAACK,WAAW,CAAC,EAAE;MAClBL,GAAG,CAACf,IAAI,CAAC,0BAA0B,EAAE,GAAG,EAAE,GAAG,EAAE;QAC7CqB,KAAK,EAAE,QAAQ;QACfe,SAAS,EAAE;MACb,CAAC;MAED,OAAOrB,GAAG,CAAC0B,MAAM,CAAC,MAAM;IAC1B;IAEA,MAAMC,cAAa,GAAKR,MAAM,IAAK;MACjC9B,OAAO,CAACI,KAAK,CAACD,eAAe,CAACC,KAAK,CAACT,EAAE,IAAImC,MAAK;MAC/C/B,oBAAoB,CAACK,KAAK,EAAC;IAC7B;IAEA,MAAMmC,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,IAAI,CAAChC,YAAY,CAACH,KAAK,EAAE;QACvBF,UAAU,CAACE,KAAI,GAAI,IAAG;QACtB;MACF;MAEA,IAAI;QACF,MAAMoC,OAAM,GAAI9B,WAAW,CAAC;QAC5B,MAAM+B,QAAO,GAAI,IAAIC,QAAQ,CAAC;QAC9BD,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAEH,OAAO,EAAE,eAAe;QAC/CC,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE1C,SAAS,CAACG,KAAK;QAExC,MAAMb,KAAK,CAACqD,IAAI,CAAC,oCAAoC,EAAEH,QAAQ,EAAE;UAC/DI,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC;QAEDC,KAAK,CAAC,uCAAuC;MAC/C,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK;QAC7BD,KAAK,CAAC,iDAAiD;MACzD;IACF;IAEA,OAAO;MACLpD,SAAS;MACTS,eAAe;MACfJ,oBAAoB;MACpBM,WAAW;MACXJ,SAAS;MACTC,UAAU;MACVK,YAAY;MACZ+B,cAAc;MACdC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}