{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, Fragment as _Fragment, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4\"\n};\nconst _hoisted_2 = {\n  class: \"max-w-2xl mx-auto\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"text-center py-12\"\n};\nconst _hoisted_4 = {\n  class: \"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\"\n};\nconst _hoisted_5 = {\n  class: \"space-y-6\"\n};\nconst _hoisted_6 = {\n  class: \"flex items-center justify-between mb-6\"\n};\nconst _hoisted_7 = {\n  class: \"text-sm font-medium text-gray-500\"\n};\nconst _hoisted_8 = {\n  class: \"w-full bg-gray-200 rounded-full h-2 mb-8\"\n};\nconst _hoisted_9 = {\n  class: \"text-2xl font-medium text-gray-800 mb-8\"\n};\nconst _hoisted_10 = {\n  class: \"flex gap-4 justify-center\"\n};\nconst _hoisted_11 = {\n  class: \"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\"\n};\nconst _hoisted_12 = {\n  class: \"text-center space-y-6\"\n};\nconst _hoisted_13 = {\n  class: \"max-w-md mx-auto\"\n};\nconst _hoisted_14 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Loading state \"), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n    class: \"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", {\n    class: \"mt-4 text-gray-600\"\n  }, \"Se încarcă întrebările...\", -1 /* HOISTED */)]))) : !$setup.isCompleted && $setup.questions.length > 0 ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Quiz content \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Progress \"), _createElementVNode(\"div\", _hoisted_6, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n    class: \"text-sm font-medium text-gray-500\"\n  }, \" Progres \", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($setup.currentQuestionIndex + 1) + \"/\" + _toDisplayString($setup.questions.length), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", {\n    class: \"bg-primary h-2 rounded-full transition-all duration-300\",\n    style: _normalizeStyle({\n      width: `${$setup.progress}%`\n    })\n  }, null, 4 /* STYLE */)]), _createCommentVNode(\" Question \"), _createElementVNode(\"h2\", _hoisted_9, _toDisplayString($setup.currentQuestion.text), 1 /* TEXT */), _createCommentVNode(\" Answer buttons \"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.answerQuestion(true)),\n    class: \"flex-1 py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200\"\n  }, \" Da \"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.answerQuestion(false)),\n    class: \"flex-1 py-3 px-6 bg-white hover:bg-gray-50 text-gray-800 border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200\"\n  }, \" Nu \")])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : !$setup.isLoading && $setup.questions.length === 0 ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" No questions state \"), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"text-center py-12\"\n  }, [_createElementVNode(\"p\", {\n    class: \"text-gray-600\"\n  }, \"Nu există întrebări disponibile momentan.\")], -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 3\n  }, [_createCommentVNode(\" Completion state \"), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"mb-8\\\"><div class=\\\"inline-flex items-center justify-center w-16 h-16 bg-primary/20 rounded-full mb-4\\\"><svg class=\\\"w-8 h-8 text-primary\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" viewBox=\\\"0 0 24 24\\\"><path stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M5 13l4 4L19 7\\\"></path></svg></div><h2 class=\\\"text-2xl font-semibold text-gray-800 mb-2\\\"> Felicitări! Ai finalizat evaluarea </h2><p class=\\\"text-gray-600\\\"> Introdu adresa ta de email pentru a primi raportul personalizat. </p></div>\", 1)), _createElementVNode(\"div\", _hoisted_13, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.userEmail = $event),\n    placeholder: \"email@example.com\",\n    class: _normalizeClass([\"w-full px-4 py-3 rounded-xl border border-gray-200 mb-4 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none\", {\n      'border-red-300': $setup.emailError\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.userEmail]]), _createElementVNode(\"button\", {\n    onClick: $setup.submitResults,\n    class: \"w-full py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50\",\n    disabled: !$setup.isValidEmail\n  }, \" Trimite Rezultatele \", 8 /* PROPS */, _hoisted_14)])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","$setup","isLoading","_hoisted_3","_cache","isCompleted","questions","length","_Fragment","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","currentQuestionIndex","_hoisted_8","style","_normalizeStyle","width","progress","_hoisted_9","currentQuestion","text","_hoisted_10","onClick","$event","answerQuestion","_hoisted_11","_hoisted_12","_createStaticVNode","_hoisted_13","type","userEmail","placeholder","_normalizeClass","emailError","submitResults","disabled","isValidEmail","_hoisted_14"],"sources":["D:\\Projects\\Barmayoun\\vue-questions\\quizz-app-v2\\src\\components\\QuizComponent.vue"],"sourcesContent":["<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport axios from 'axios'\r\nimport { jsPDF } from 'jspdf'\r\n\r\nconst API_URL = 'http://localhost:3000/api'\r\n\r\nconst questions = ref([])\r\nconst currentQuestionIndex = ref(0)\r\nconst answers = ref({})\r\nconst userEmail = ref('')\r\nconst emailError = ref(false)\r\nconst isLoading = ref(true)\r\n\r\n// Fetch questions from DB\r\nconst loadQuestions = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/questions`)\r\n    questions.value = response.data\r\n    isLoading.value = false\r\n  } catch (error) {\r\n    console.error('Error loading questions:', error)\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst currentQuestion = computed(() =>\r\n  questions.value[currentQuestionIndex.value]\r\n)\r\n\r\nconst isCompleted = computed(() =>\r\n  currentQuestionIndex.value >= questions.value.length\r\n)\r\n\r\nconst progress = computed(() =>\r\n  (currentQuestionIndex.value / questions.value.length) * 100\r\n)\r\n\r\nconst isValidEmail = computed(() => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n  return emailRegex.test(userEmail.value)\r\n})\r\n\r\nconst answerQuestion = (answer) => {\r\n  if (currentQuestion.value) {\r\n    answers.value[currentQuestion.value._id] = answer\r\n    currentQuestionIndex.value++\r\n  }\r\n}\r\n\r\nconst generatePDF = async () => {\r\n  const doc = new jsPDF({\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  })\r\n\r\n  // Header\r\n  doc.setFontSize(22)\r\n  doc.text('Raport de Evaluare', 105, 25, { align: 'center' })\r\n\r\n  // Data\r\n  doc.setFontSize(12)\r\n  const date = new Date().toLocaleDateString('ro-RO', {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit'\r\n  }).split('.').join('.')\r\n  doc.text(`Generat la: ${date}`, 105, 35, { align: 'center' })\r\n\r\n  let yPos = 50\r\n\r\n  // Parcurgere întrebări și răspunsuri\r\n  for (const question of questions.value) {\r\n    const userAnswer = answers.value[question._id]\r\n\r\n    // Verifică spațiul disponibil\r\n    if (yPos > 250) {\r\n      doc.addPage()\r\n      yPos = 30\r\n    }\r\n\r\n    // Întrebarea\r\n    doc.setFontSize(12)\r\n    doc.setFont(\"helvetica\", \"normal\")\r\n    doc.text(`${question.text}`, 20, yPos)\r\n    yPos += 10\r\n\r\n    // Răspuns\r\n    doc.setFontSize(12)\r\n    doc.text(`Răspuns: ${userAnswer ? 'Da' : 'Nu'}`, 20, yPos, {\r\n      charSpace: 0\r\n    })\r\n    yPos += 8\r\n\r\n    // Feedback\r\n    const feedback = userAnswer ? question.feedbackYes : question.feedbackNo\r\n    const splitFeedback = doc.splitTextToSize(feedback, 170)\r\n\r\n    doc.setFontSize(12)\r\n    splitFeedback.forEach(line => {\r\n      if (yPos > 270) {\r\n        doc.addPage()\r\n        yPos = 30\r\n      }\r\n      doc.text(line, 20, yPos, {\r\n        charSpace: 0\r\n      })\r\n      yPos += 7\r\n    })\r\n\r\n    yPos += 10\r\n  }\r\n\r\n  // Footer\r\n  doc.setFontSize(10)\r\n  doc.text('Document generat automat', 105, 280, {\r\n    align: 'center',\r\n    charSpace: 0\r\n  })\r\n\r\n  return doc.output('blob')\r\n}\r\n\r\nconst submitResults = async () => {\r\n  if (!isValidEmail.value) {\r\n    emailError.value = true\r\n    return\r\n  }\r\n\r\n  try {\r\n    const pdfBlob = await generatePDF()\r\n    const formData = new FormData()\r\n    formData.append('pdf', pdfBlob, 'rezultate.pdf')\r\n    formData.append('email', userEmail.value)\r\n\r\n    await axios.post(`${API_URL}/send-results`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n\r\n    alert('Rezultatele au fost trimise pe email!')\r\n  } catch (error) {\r\n    console.error('Error:', error)\r\n    alert('A apărut o eroare. Te rugăm să încerci din nou.')\r\n  }\r\n}\r\n\r\n// Load questions when component is mounted\r\nloadQuestions()\r\n</script>\r\n\r\n<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4\">\r\n    <div class=\"max-w-2xl mx-auto\">\r\n      <!-- Loading state -->\r\n      <div v-if=\"isLoading\" class=\"text-center py-12\">\r\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\r\n        <p class=\"mt-4 text-gray-600\">Se încarcă întrebările...</p>\r\n      </div>\r\n\r\n      <!-- Quiz content -->\r\n      <div v-else-if=\"!isCompleted && questions.length > 0\"\r\n        class=\"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\">\r\n        <div class=\"space-y-6\">\r\n          <!-- Progress -->\r\n          <div class=\"flex items-center justify-between mb-6\">\r\n            <span class=\"text-sm font-medium text-gray-500\">\r\n              Progres\r\n            </span>\r\n            <span class=\"text-sm font-medium text-gray-500\">\r\n              {{ currentQuestionIndex + 1 }}/{{ questions.length }}\r\n            </span>\r\n          </div>\r\n\r\n          <div class=\"w-full bg-gray-200 rounded-full h-2 mb-8\">\r\n            <div class=\"bg-primary h-2 rounded-full transition-all duration-300\" :style=\"{ width: `${progress}%` }\">\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Question -->\r\n          <h2 class=\"text-2xl font-medium text-gray-800 mb-8\">\r\n            {{ currentQuestion.text }}\r\n          </h2>\r\n\r\n          <!-- Answer buttons -->\r\n          <div class=\"flex gap-4 justify-center\">\r\n            <button @click=\"answerQuestion(true)\"\r\n              class=\"flex-1 py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200\">\r\n              Da\r\n            </button>\r\n            <button @click=\"answerQuestion(false)\"\r\n              class=\"flex-1 py-3 px-6 bg-white hover:bg-gray-50 text-gray-800 border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200\">\r\n              Nu\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- No questions state -->\r\n      <div v-else-if=\"!isLoading && questions.length === 0\" class=\"text-center py-12\">\r\n        <p class=\"text-gray-600\">Nu există întrebări disponibile momentan.</p>\r\n      </div>\r\n\r\n      <!-- Completion state -->\r\n      <div v-else class=\"bg-white/70 backdrop-blur-lg rounded-2xl p-8 shadow-lg border border-gray-100\">\r\n        <div class=\"text-center space-y-6\">\r\n          <div class=\"mb-8\">\r\n            <div class=\"inline-flex items-center justify-center w-16 h-16 bg-primary/20 rounded-full mb-4\">\r\n              <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n              </svg>\r\n            </div>\r\n            <h2 class=\"text-2xl font-semibold text-gray-800 mb-2\">\r\n              Felicitări! Ai finalizat evaluarea\r\n            </h2>\r\n            <p class=\"text-gray-600\">\r\n              Introdu adresa ta de email pentru a primi raportul personalizat.\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"max-w-md mx-auto\">\r\n            <input type=\"email\" v-model=\"userEmail\" placeholder=\"email@example.com\"\r\n              class=\"w-full px-4 py-3 rounded-xl border border-gray-200 mb-4 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none\"\r\n              :class=\"{ 'border-red-300': emailError }\">\r\n            <button @click=\"submitResults\"\r\n              class=\"w-full py-3 px-6 bg-primary hover:bg-primary/90 text-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50\"\r\n              :disabled=\"!isValidEmail\">\r\n              Trimite Rezultatele\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}